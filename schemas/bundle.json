{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://example.com/lms/bundle.json",
    "title": "L&D Portal MVP Schema Bundle",
    "description": "Single-file JSON Schema bundle for frontend/backend contracts (snake_case).",
    "version": "1.0.0",
    "type": "object",
    "properties": {
        "components": {
            "type": "object",
            "description": "Index of commonly used root schemas",
            "properties": {
                "user": {
                    "$ref": "#/$defs/users/user"
                },
                "user_create": {
                    "$ref": "#/$defs/users/user_create"
                },
                "user_update": {
                    "$ref": "#/$defs/users/user_update"
                },
                "profile": {
                    "$ref": "#/$defs/profile/profile"
                },
                "training": {
                    "$ref": "#/$defs/training/training"
                },
                "training_catalog_response": {
                    "$ref": "#/$defs/training/training_catalog_response"
                },
                "enrollment": {
                    "$ref": "#/$defs/enrollment/enrollment"
                },
                "attendance_record": {
                    "$ref": "#/$defs/attendance/attendance_record"
                },
                "training_attendance_report": {
                    "$ref": "#/$defs/attendance/training_attendance_report"
                },
                "badge": {
                    "$ref": "#/$defs/badge_cert/badge"
                },
                "certificate_meta": {
                    "$ref": "#/$defs/badge_cert/certificate_meta"
                },
                "notification": {
                    "$ref": "#/$defs/notifications/notification"
                },
                "department_report": {
                    "$ref": "#/$defs/reports/department_report"
                },
                "manager_dashboard": {
                    "$ref": "#/$defs/manager/manager_dashboard"
                },
                "login_request": {
                    "$ref": "#/$defs/auth/login_request"
                },
                "token_response": {
                    "$ref": "#/$defs/auth/token_response"
                },
                "error_response": {
                    "$ref": "#/$defs/errors/error_response"
                }
            },
            "additionalProperties": false
        }
    },
    "required": [
        "components"
    ],
    "$defs": {
        "shared": {
            "id": {
                "type": "string",
                "format": "uuid",
                "description": "UUID identifier"
            },
            "timestamp": {
                "type": "string",
                "format": "date-time",
                "description": "ISO 8601 UTC timestamp"
            },
            "role": {
                "type": "string",
                "enum": [
                    "EMPLOYEE",
                    "ADMIN",
                    "SUPER_ADMIN",
                    "MANAGER"
                ]
            },
            "training_type": {
                "type": "string",
                "enum": [
                    "ONLINE",
                    "CLASSROOM",
                    "WORKSHOP",
                    "WEBINAR"
                ]
            },
            "training_status": {
                "type": "string",
                "enum": [
                    "DRAFT",
                    "PUBLISHED",
                    "ONGOING",
                    "COMPLETED",
                    "CANCELLED",
                    "PENDING_APPROVAL"
                ]
            },
            "enrollment_status": {
                "type": "string",
                "enum": [
                    "ASSIGNED",
                    "ENROLLED",
                    "IN_PROGRESS",
                    "COMPLETED",
                    "CANCELLED"
                ]
            },
            "attendance_status": {
                "type": "string",
                "enum": [
                    "PRESENT",
                    "ABSENT",
                    "PARTIAL"
                ]
            },
            "badge_type": {
                "type": "string",
                "enum": [
                    "BRONZE",
                    "SILVER",
                    "GOLD",
                    "PLATINUM"
                ]
            },
            "notification_type": {
                "type": "string",
                "enum": [
                    "TRAINING_ASSIGNMENT",
                    "ENROLLMENT_CONFIRMATION",
                    "MANDATORY_REMINDER",
                    "TRAINING_START_REMINDER",
                    "APPROVAL_RESULT",
                    "BADGE_ACHIEVEMENT",
                    "CERTIFICATE_AVAILABLE",
                    "CERT_EXPIRY_ALERT"
                ]
            },
            "paginated": {
                "type": "object",
                "properties": {
                    "page": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "page_size": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "total_items": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "total_pages": {
                        "type": "integer",
                        "minimum": 0
                    }
                },
                "required": [
                    "page",
                    "page_size",
                    "total_items",
                    "total_pages"
                ],
                "additionalProperties": true
            }
        },
        "auth": {
            "login_request": {
                "type": "object",
                "properties": {
                    "username": {
                        "type": "string",
                        "minLength": 3
                    },
                    "password": {
                        "type": "string",
                        "minLength": 8
                    },
                    "remember_me": {
                        "type": "boolean"
                    }
                },
                "required": [
                    "username",
                    "password"
                ],
                "additionalProperties": false
            },
            "token_response": {
                "type": "object",
                "properties": {
                    "access_token": {
                        "type": "string"
                    },
                    "token_type": {
                        "type": "string",
                        "enum": [
                            "Bearer"
                        ]
                    },
                    "expires_in": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "refresh_token": {
                        "type": "string"
                    }
                },
                "required": [
                    "access_token",
                    "token_type",
                    "expires_in"
                ],
                "additionalProperties": false
            },
            "refresh_request": {
                "type": "object",
                "properties": {
                    "refresh_token": {
                        "type": "string"
                    }
                },
                "required": [
                    "refresh_token"
                ],
                "additionalProperties": false
            },
            "logout_response": {
                "type": "object",
                "properties": {
                    "success": {
                        "type": "boolean"
                    }
                },
                "required": [
                    "success"
                ],
                "additionalProperties": false
            }
        },
        "users": {
            "department": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "name": {
                        "type": "string",
                        "minLength": 1
                    },
                    "created_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "updated_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "id",
                    "name",
                    "created_at",
                    "updated_at"
                ],
                "additionalProperties": false
            },
            "user": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "first_name": {
                        "type": "string"
                    },
                    "last_name": {
                        "type": "string"
                    },
                    "employee_id": {
                        "type": "string"
                    },
                    "department_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "role": {
                        "$ref": "#/$defs/shared/role"
                    },
                    "manager_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "created_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "updated_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "id",
                    "email",
                    "first_name",
                    "last_name",
                    "employee_id",
                    "role",
                    "created_at",
                    "updated_at"
                ],
                "additionalProperties": false
            },
            "user_create": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string",
                        "format": "email"
                    },
                    "password": {
                        "type": "string",
                        "minLength": 8
                    },
                    "first_name": {
                        "type": "string"
                    },
                    "last_name": {
                        "type": "string"
                    },
                    "employee_id": {
                        "type": "string"
                    },
                    "department_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "role": {
                        "$ref": "#/$defs/shared/role"
                    },
                    "manager_id": {
                        "$ref": "#/$defs/shared/id"
                    }
                },
                "required": [
                    "email",
                    "password",
                    "first_name",
                    "last_name",
                    "employee_id",
                    "role"
                ],
                "additionalProperties": false
            },
            "user_update": {
                "type": "object",
                "properties": {
                    "first_name": {
                        "type": "string"
                    },
                    "last_name": {
                        "type": "string"
                    },
                    "department_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "manager_id": {
                        "$ref": "#/$defs/shared/id"
                    }
                },
                "additionalProperties": false
            }
        },
        "profile": {
            "skill": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "proficiency": {
                        "type": "string",
                        "enum": [
                            "BEGINNER",
                            "INTERMEDIATE",
                            "ADVANCED",
                            "EXPERT"
                        ]
                    }
                },
                "required": [
                    "name",
                    "proficiency"
                ],
                "additionalProperties": false
            },
            "tech_stack": {
                "type": "object",
                "properties": {
                    "languages": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "frameworks": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "tools": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "databases": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "cloud": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                },
                "required": [
                    "languages",
                    "frameworks",
                    "tools"
                ],
                "additionalProperties": false
            },
            "learning_hours": {
                "type": "object",
                "properties": {
                    "total": {
                        "type": "number",
                        "minimum": 0
                    },
                    "annual": {
                        "type": "number",
                        "minimum": 0
                    },
                    "monthly_breakdown": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "number",
                            "minimum": 0
                        },
                        "description": "Map YYYY-MM to hours"
                    }
                },
                "required": [
                    "total",
                    "annual"
                ],
                "additionalProperties": false
            },
            "training_history_entry": {
                "type": "object",
                "properties": {
                    "training_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "title": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "COMPLETED",
                            "IN_PROGRESS",
                            "ENROLLED",
                            "ASSIGNED"
                        ]
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "completion_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "attendance_pct": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "certificate_url": {
                        "type": "string",
                        "format": "uri"
                    }
                },
                "required": [
                    "training_id",
                    "title",
                    "status"
                ],
                "additionalProperties": false
            },
            "profile": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "user_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "bio": {
                        "type": "string"
                    },
                    "tech_stack": {
                        "$ref": "#/$defs/profile/tech_stack"
                    },
                    "skills": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/profile/skill"
                        }
                    },
                    "badges": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/badge_cert/badge"
                        }
                    },
                    "learning_hours": {
                        "$ref": "#/$defs/profile/learning_hours"
                    },
                    "certifications": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/profile/certification"
                        }
                    },
                    "training_history": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/profile/training_history_entry"
                        }
                    },
                    "created_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "updated_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "id",
                    "user_id",
                    "tech_stack",
                    "skills",
                    "learning_hours",
                    "created_at",
                    "updated_at"
                ],
                "additionalProperties": false
            },
            "profile_update": {
                "type": "object",
                "properties": {
                    "bio": {
                        "type": "string"
                    },
                    "tech_stack": {
                        "$ref": "#/$defs/profile/tech_stack"
                    },
                    "skills": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/profile/skill"
                        }
                    }
                },
                "additionalProperties": false
            },
            "certification": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "user_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "name": {
                        "type": "string"
                    },
                    "issuing_body": {
                        "type": "string"
                    },
                    "issue_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "expiry_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "document_url": {
                        "type": "string",
                        "format": "uri"
                    },
                    "verified": {
                        "type": "boolean"
                    },
                    "created_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "updated_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "id",
                    "user_id",
                    "name",
                    "issuing_body",
                    "issue_date",
                    "created_at",
                    "updated_at"
                ],
                "additionalProperties": false
            }
        },
        "training": {
            "training_material": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "title": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "LINK",
                            "DOCUMENT",
                            "VIDEO"
                        ]
                    },
                    "url": {
                        "type": "string",
                        "format": "uri"
                    },
                    "description": {
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "title",
                    "type",
                    "url"
                ],
                "additionalProperties": false
            },
            "prerequisite": {
                "type": "object",
                "properties": {
                    "description": {
                        "type": "string"
                    },
                    "required": {
                        "type": "boolean"
                    }
                },
                "required": [
                    "description",
                    "required"
                ],
                "additionalProperties": false
            },
            "training_session": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "training_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "session_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "start_time": {
                        "type": "string",
                        "pattern": "^\\d{2}:\\d{2}$"
                    },
                    "end_time": {
                        "type": "string",
                        "pattern": "^\\d{2}:\\d{2}$"
                    },
                    "location": {
                        "type": "string"
                    }
                },
                "required": [
                    "id",
                    "training_id",
                    "session_date",
                    "start_time",
                    "end_time"
                ],
                "additionalProperties": false
            },
            "training": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "title": {
                        "type": "string",
                        "maxLength": 200
                    },
                    "description": {
                        "type": "string",
                        "maxLength": 2000
                    },
                    "category": {
                        "type": "string"
                    },
                    "type": {
                        "$ref": "#/$defs/shared/training_type"
                    },
                    "duration_hours": {
                        "type": "number",
                        "minimum": 0
                    },
                    "instructor": {
                        "type": "string"
                    },
                    "max_participants": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "status": {
                        "$ref": "#/$defs/shared/training_status"
                    },
                    "is_mandatory": {
                        "type": "boolean"
                    },
                    "approved_by": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "created_by": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "materials": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/training/training_material"
                        }
                    },
                    "schedule": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/training/training_session"
                        }
                    },
                    "location": {
                        "type": "string"
                    },
                    "available_seats": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "total_capacity": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "enrolled_count": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "prerequisites": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/training/prerequisite"
                        }
                    },
                    "deadline": {
                        "type": "string",
                        "format": "date"
                    },
                    "created_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "updated_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "id",
                    "title",
                    "description",
                    "category",
                    "type",
                    "duration_hours",
                    "instructor",
                    "max_participants",
                    "start_date",
                    "end_date",
                    "status",
                    "is_mandatory",
                    "created_by",
                    "created_at",
                    "updated_at"
                ],
                "additionalProperties": false
            },
            "training_create": {
                "type": "object",
                "properties": {
                    "title": {
                        "type": "string",
                        "maxLength": 200
                    },
                    "description": {
                        "type": "string",
                        "maxLength": 2000
                    },
                    "category": {
                        "type": "string"
                    },
                    "type": {
                        "$ref": "#/$defs/shared/training_type"
                    },
                    "duration_hours": {
                        "type": "number",
                        "minimum": 0
                    },
                    "instructor": {
                        "type": "string"
                    },
                    "max_participants": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "materials": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/training/training_material"
                        }
                    },
                    "schedule": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/training/training_session"
                        }
                    },
                    "location": {
                        "type": "string"
                    },
                    "is_mandatory": {
                        "type": "boolean"
                    },
                    "prerequisites": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/training/prerequisite"
                        }
                    }
                },
                "required": [
                    "title",
                    "description",
                    "category",
                    "type",
                    "duration_hours",
                    "instructor",
                    "max_participants",
                    "start_date",
                    "end_date",
                    "is_mandatory"
                ],
                "additionalProperties": false
            },
            "training_update": {
                "type": "object",
                "properties": {
                    "title": {
                        "type": "string",
                        "maxLength": 200
                    },
                    "description": {
                        "type": "string",
                        "maxLength": 2000
                    },
                    "category": {
                        "type": "string"
                    },
                    "type": {
                        "$ref": "#/$defs/shared/training_type"
                    },
                    "duration_hours": {
                        "type": "number",
                        "minimum": 0
                    },
                    "instructor": {
                        "type": "string"
                    },
                    "max_participants": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "materials": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/training/training_material"
                        }
                    },
                    "schedule": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/training/training_session"
                        }
                    },
                    "location": {
                        "type": "string"
                    },
                    "is_mandatory": {
                        "type": "boolean"
                    },
                    "prerequisites": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/training/prerequisite"
                        }
                    },
                    "status": {
                        "$ref": "#/$defs/shared/training_status"
                    }
                },
                "additionalProperties": false
            },
            "training_filters": {
                "type": "object",
                "properties": {
                    "q": {
                        "type": "string"
                    },
                    "category": {
                        "type": "string"
                    },
                    "type": {
                        "$ref": "#/$defs/shared/training_type"
                    },
                    "status": {
                        "$ref": "#/$defs/shared/training_status"
                    },
                    "department_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "mandatory": {
                        "type": "boolean"
                    },
                    "date_from": {
                        "type": "string",
                        "format": "date"
                    },
                    "date_to": {
                        "type": "string",
                        "format": "date"
                    },
                    "sort": {
                        "type": "string",
                        "enum": [
                            "DATE",
                            "TITLE",
                            "CATEGORY",
                            "DURATION"
                        ]
                    },
                    "order": {
                        "type": "string",
                        "enum": [
                            "ASC",
                            "DESC"
                        ]
                    },
                    "page": {
                        "type": "integer",
                        "minimum": 1
                    },
                    "page_size": {
                        "type": "integer",
                        "minimum": 1
                    }
                },
                "required": [
                    "page",
                    "page_size"
                ],
                "additionalProperties": false
            },
            "training_catalog_response": {
                "allOf": [
                    {
                        "$ref": "#/$defs/shared/paginated"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "filters_applied": {
                                "$ref": "#/$defs/training/training_filters"
                            },
                            "items": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/$defs/training/training"
                                }
                            }
                        },
                        "required": [
                            "filters_applied",
                            "items"
                        ]
                    }
                ]
            }
        },
        "enrollment": {
            "enrollment": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "user_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "training_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "enrollment_date": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "status": {
                        "$ref": "#/$defs/shared/enrollment_status"
                    },
                    "assigned_by": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "is_mandatory": {
                        "type": "boolean"
                    },
                    "deadline": {
                        "type": "string",
                        "format": "date"
                    },
                    "conflict_with": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/shared/id"
                        }
                    },
                    "created_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "updated_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "id",
                    "user_id",
                    "training_id",
                    "enrollment_date",
                    "status",
                    "is_mandatory",
                    "created_at",
                    "updated_at"
                ],
                "additionalProperties": false
            },
            "enroll_request": {
                "type": "object",
                "properties": {
                    "training_id": {
                        "$ref": "#/$defs/shared/id"
                    }
                },
                "required": [
                    "training_id"
                ],
                "additionalProperties": false
            },
            "unenroll_response": {
                "type": "object",
                "properties": {
                    "success": {
                        "type": "boolean"
                    },
                    "message": {
                        "type": "string"
                    }
                },
                "required": [
                    "success"
                ],
                "additionalProperties": false
            }
        },
        "attendance": {
            "attendance_record": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "enrollment_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "session_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "status": {
                        "$ref": "#/$defs/shared/attendance_status"
                    },
                    "notes": {
                        "type": "string"
                    },
                    "marked_by": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "marked_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "id",
                    "enrollment_id",
                    "session_id",
                    "status",
                    "marked_by",
                    "marked_at"
                ],
                "additionalProperties": false
            },
            "attendance_bulk_mark_request": {
                "type": "object",
                "properties": {
                    "training_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "session_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "entries": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "enrollment_id": {
                                    "$ref": "#/$defs/shared/id"
                                },
                                "status": {
                                    "$ref": "#/$defs/shared/attendance_status"
                                },
                                "notes": {
                                    "type": "string"
                                }
                            },
                            "required": [
                                "enrollment_id",
                                "status"
                            ],
                            "additionalProperties": false
                        }
                    }
                },
                "required": [
                    "training_id",
                    "session_id",
                    "entries"
                ],
                "additionalProperties": false
            },
            "session_attendance_summary": {
                "type": "object",
                "properties": {
                    "session_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "present_count": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "absent_count": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "partial_count": {
                        "type": "integer",
                        "minimum": 0
                    }
                },
                "required": [
                    "session_id",
                    "present_count",
                    "absent_count",
                    "partial_count"
                ],
                "additionalProperties": false
            },
            "training_attendance_report": {
                "type": "object",
                "properties": {
                    "training_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "session_summaries": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/attendance/session_attendance_summary"
                        }
                    },
                    "overall_attendance_pct": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                    }
                },
                "required": [
                    "training_id",
                    "session_summaries",
                    "overall_attendance_pct"
                ],
                "additionalProperties": false
            }
        },
        "completion": {
            "completion_criteria": {
                "type": "object",
                "properties": {
                    "attendance_threshold_pct": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "assessment_completed": {
                        "type": "boolean"
                    },
                    "assignments_submitted": {
                        "type": "boolean"
                    }
                },
                "required": [
                    "attendance_threshold_pct"
                ],
                "additionalProperties": false
            },
            "training_completion": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "enrollment_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "completion_date": {
                        "type": "string",
                        "format": "date"
                    },
                    "learning_hours": {
                        "type": "number",
                        "minimum": 0
                    },
                    "certificate_url": {
                        "type": "string",
                        "format": "uri"
                    },
                    "criteria": {
                        "$ref": "#/$defs/completion/completion_criteria"
                    }
                },
                "required": [
                    "id",
                    "enrollment_id",
                    "completion_date",
                    "learning_hours",
                    "criteria"
                ],
                "additionalProperties": false
            },
            "completion_mark_request": {
                "type": "object",
                "properties": {
                    "enrollment_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "assessment_completed": {
                        "type": "boolean"
                    },
                    "assignments_submitted": {
                        "type": "boolean"
                    }
                },
                "required": [
                    "enrollment_id"
                ],
                "additionalProperties": false
            }
        },
        "assignment": {
            "assignment_scope": {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "ALL",
                            "DEPARTMENTS",
                            "USERS"
                        ]
                    },
                    "department_ids": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/shared/id"
                        }
                    },
                    "user_ids": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/shared/id"
                        }
                    }
                },
                "required": [
                    "type"
                ],
                "additionalProperties": false
            },
            "training_assignment_request": {
                "type": "object",
                "properties": {
                    "training_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "scope": {
                        "$ref": "#/$defs/assignment/assignment_scope"
                    },
                    "deadline": {
                        "type": "string",
                        "format": "date"
                    },
                    "notify": {
                        "type": "boolean"
                    }
                },
                "required": [
                    "training_id",
                    "scope"
                ],
                "additionalProperties": false
            },
            "assigned_training": {
                "type": "object",
                "properties": {
                    "training": {
                        "$ref": "#/$defs/training/training"
                    },
                    "assigned_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "deadline": {
                        "type": "string",
                        "format": "date"
                    }
                },
                "required": [
                    "training",
                    "assigned_at"
                ],
                "additionalProperties": false
            }
        },
        "approval": {
            "approval_request": {
                "type": "object",
                "properties": {
                    "training_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "comment": {
                        "type": "string"
                    }
                },
                "required": [
                    "training_id"
                ],
                "additionalProperties": false
            },
            "approval_response": {
                "type": "object",
                "properties": {
                    "training_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "approved": {
                        "type": "boolean"
                    },
                    "reviewed_by": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "reviewed_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "comment": {
                        "type": "string"
                    }
                },
                "required": [
                    "training_id",
                    "approved",
                    "reviewed_by",
                    "reviewed_at"
                ],
                "additionalProperties": false
            }
        },
        "badge_cert": {
            "badge": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "user_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "badge_type": {
                        "$ref": "#/$defs/shared/badge_type"
                    },
                    "year_earned": {
                        "type": "integer"
                    },
                    "hours_completed": {
                        "type": "number",
                        "minimum": 0
                    },
                    "awarded_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "id",
                    "user_id",
                    "badge_type",
                    "year_earned",
                    "hours_completed",
                    "awarded_at"
                ],
                "additionalProperties": false
            },
            "badge_check_result": {
                "type": "object",
                "properties": {
                    "user_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "badge_awarded": {
                        "$ref": "#/$defs/badge_cert/badge"
                    },
                    "eligible_badges": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/shared/badge_type"
                        }
                    },
                    "current_annual_hours": {
                        "type": "number",
                        "minimum": 0
                    }
                },
                "required": [
                    "user_id",
                    "current_annual_hours"
                ],
                "additionalProperties": false
            },
            "certificate_meta": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "user_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "badge_type": {
                        "$ref": "#/$defs/shared/badge_type"
                    },
                    "year_earned": {
                        "type": "integer"
                    },
                    "total_learning_hours": {
                        "type": "number",
                        "minimum": 0
                    },
                    "certificate_number": {
                        "type": "string"
                    },
                    "issued_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "pdf_url": {
                        "type": "string",
                        "format": "uri"
                    }
                },
                "required": [
                    "id",
                    "user_id",
                    "badge_type",
                    "year_earned",
                    "total_learning_hours",
                    "certificate_number",
                    "issued_at",
                    "pdf_url"
                ],
                "additionalProperties": false
            },
            "certificate_generate_response": {
                "type": "object",
                "properties": {
                    "badge_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "certificate": {
                        "$ref": "#/$defs/badge_cert/certificate_meta"
                    }
                },
                "required": [
                    "badge_id",
                    "certificate"
                ],
                "additionalProperties": false
            }
        },
        "notifications": {
            "notification": {
                "type": "object",
                "properties": {
                    "id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "user_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "type": {
                        "$ref": "#/$defs/shared/notification_type"
                    },
                    "title": {
                        "type": "string"
                    },
                    "message": {
                        "type": "string"
                    },
                    "is_read": {
                        "type": "boolean"
                    },
                    "created_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "link_url": {
                        "type": "string",
                        "format": "uri"
                    },
                    "context": {
                        "type": "object",
                        "additionalProperties": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "number"
                                }
                            ]
                        }
                    }
                },
                "required": [
                    "id",
                    "user_id",
                    "type",
                    "title",
                    "message",
                    "is_read",
                    "created_at"
                ],
                "additionalProperties": false
            },
            "notification_read_response": {
                "type": "object",
                "properties": {
                    "notification_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "is_read": {
                        "type": "boolean"
                    }
                },
                "required": [
                    "notification_id",
                    "is_read"
                ],
                "additionalProperties": false
            }
        },
        "reports": {
            "department_report_filters": {
                "type": "object",
                "properties": {
                    "department_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "date_from": {
                        "type": "string",
                        "format": "date"
                    },
                    "date_to": {
                        "type": "string",
                        "format": "date"
                    }
                },
                "required": [
                    "department_id"
                ],
                "additionalProperties": false
            },
            "department_report": {
                "type": "object",
                "properties": {
                    "department_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "total_trainings_completed": {
                        "type": "integer",
                        "minimum": 0
                    },
                    "avg_learning_hours_per_employee": {
                        "type": "number",
                        "minimum": 0
                    },
                    "training_participation_rate_pct": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "mandatory_completion_pct": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "popular_categories": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "category": {
                                    "type": "string"
                                },
                                "count": {
                                    "type": "integer",
                                    "minimum": 0
                                }
                            },
                            "required": [
                                "category",
                                "count"
                            ],
                            "additionalProperties": false
                        }
                    },
                    "generated_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "department_id",
                    "total_trainings_completed",
                    "avg_learning_hours_per_employee",
                    "training_participation_rate_pct",
                    "mandatory_completion_pct",
                    "popular_categories",
                    "generated_at"
                ],
                "additionalProperties": false
            },
            "director_report": {
                "type": "object",
                "properties": {
                    "director_user_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "team_hours_by_user": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "user_id": {
                                    "$ref": "#/$defs/shared/id"
                                },
                                "hours": {
                                    "type": "number",
                                    "minimum": 0
                                }
                            },
                            "required": [
                                "user_id",
                                "hours"
                            ],
                            "additionalProperties": false
                        }
                    },
                    "skills_gap": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "skill": {
                                    "type": "string"
                                },
                                "count_missing": {
                                    "type": "integer",
                                    "minimum": 0
                                }
                            },
                            "required": [
                                "skill",
                                "count_missing"
                            ],
                            "additionalProperties": false
                        }
                    },
                    "training_investment_by_team": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "team_id": {
                                    "$ref": "#/$defs/shared/id"
                                },
                                "hours": {
                                    "type": "number",
                                    "minimum": 0
                                }
                            },
                            "required": [
                                "team_id",
                                "hours"
                            ],
                            "additionalProperties": false
                        }
                    },
                    "generated_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "director_user_id",
                    "team_hours_by_user",
                    "skills_gap",
                    "training_investment_by_team",
                    "generated_at"
                ],
                "additionalProperties": false
            },
            "mandatory_compliance_report": {
                "type": "object",
                "properties": {
                    "overall_compliance_pct": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "by_department": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "department_id": {
                                    "$ref": "#/$defs/shared/id"
                                },
                                "compliance_pct": {
                                    "type": "number",
                                    "minimum": 0,
                                    "maximum": 100
                                }
                            },
                            "required": [
                                "department_id",
                                "compliance_pct"
                            ],
                            "additionalProperties": false
                        }
                    },
                    "pending_employees": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "user_id": {
                                    "$ref": "#/$defs/shared/id"
                                },
                                "training_id": {
                                    "$ref": "#/$defs/shared/id"
                                },
                                "deadline": {
                                    "type": "string",
                                    "format": "date"
                                }
                            },
                            "required": [
                                "user_id",
                                "training_id"
                            ],
                            "additionalProperties": false
                        }
                    },
                    "overdue": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "user_id": {
                                    "$ref": "#/$defs/shared/id"
                                },
                                "training_id": {
                                    "$ref": "#/$defs/shared/id"
                                },
                                "days_overdue": {
                                    "type": "integer",
                                    "minimum": 1
                                }
                            },
                            "required": [
                                "user_id",
                                "training_id",
                                "days_overdue"
                            ],
                            "additionalProperties": false
                        }
                    },
                    "generated_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "overall_compliance_pct",
                    "by_department",
                    "pending_employees",
                    "overdue",
                    "generated_at"
                ],
                "additionalProperties": false
            },
            "custom_report_filters": {
                "type": "object",
                "properties": {
                    "date_from": {
                        "type": "string",
                        "format": "date"
                    },
                    "date_to": {
                        "type": "string",
                        "format": "date"
                    },
                    "department_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "role": {
                        "$ref": "#/$defs/shared/role"
                    },
                    "training_type": {
                        "$ref": "#/$defs/shared/training_type"
                    },
                    "mandatory": {
                        "type": "boolean"
                    }
                },
                "additionalProperties": false
            },
            "custom_report": {
                "type": "object",
                "properties": {
                    "filters": {
                        "$ref": "#/$defs/reports/custom_report_filters"
                    },
                    "summary": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "number"
                        }
                    },
                    "rows": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "additionalProperties": {
                                "anyOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "type": "number"
                                    }
                                ]
                            }
                        }
                    },
                    "generated_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    },
                    "export_url": {
                        "type": "string",
                        "format": "uri"
                    }
                },
                "required": [
                    "filters",
                    "summary",
                    "rows",
                    "generated_at"
                ],
                "additionalProperties": false
            }
        },
        "manager": {
            "reportee": {
                "type": "object",
                "properties": {
                    "user": {
                        "$ref": "#/$defs/users/user"
                    },
                    "mandatory_compliance_pct": {
                        "type": "number",
                        "minimum": 0,
                        "maximum": 100
                    },
                    "annual_hours": {
                        "type": "number",
                        "minimum": 0
                    },
                    "badges": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/badge_cert/badge"
                        }
                    },
                    "pending_mandatory": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "training_id": {
                                    "$ref": "#/$defs/shared/id"
                                },
                                "deadline": {
                                    "type": "string",
                                    "format": "date"
                                }
                            },
                            "required": [
                                "training_id"
                            ],
                            "additionalProperties": false
                        }
                    }
                },
                "required": [
                    "user",
                    "mandatory_compliance_pct",
                    "annual_hours",
                    "badges",
                    "pending_mandatory"
                ],
                "additionalProperties": false
            },
            "manager_dashboard": {
                "type": "object",
                "properties": {
                    "manager_id": {
                        "$ref": "#/$defs/shared/id"
                    },
                    "team_overview": {
                        "type": "object",
                        "properties": {
                            "total_reportees": {
                                "type": "integer",
                                "minimum": 0
                            },
                            "avg_hours": {
                                "type": "number",
                                "minimum": 0
                            },
                            "mandatory_compliance_pct": {
                                "type": "number",
                                "minimum": 0,
                                "maximum": 100
                            }
                        },
                        "required": [
                            "total_reportees",
                            "avg_hours",
                            "mandatory_compliance_pct"
                        ],
                        "additionalProperties": false
                    },
                    "reportees": {
                        "type": "array",
                        "items": {
                            "$ref": "#/$defs/manager/reportee"
                        }
                    },
                    "leaderboard": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "user_id": {
                                    "$ref": "#/$defs/shared/id"
                                },
                                "hours": {
                                    "type": "number",
                                    "minimum": 0
                                }
                            },
                            "required": [
                                "user_id",
                                "hours"
                            ],
                            "additionalProperties": false
                        }
                    },
                    "generated_at": {
                        "$ref": "#/$defs/shared/timestamp"
                    }
                },
                "required": [
                    "manager_id",
                    "team_overview",
                    "reportees",
                    "leaderboard",
                    "generated_at"
                ],
                "additionalProperties": false
            }
        },
        "errors": {
            "error_response": {
                "type": "object",
                "properties": {
                    "code": {
                        "type": "string"
                    },
                    "message": {
                        "type": "string"
                    },
                    "details": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "required": [
                    "code",
                    "message"
                ],
                "additionalProperties": false
            }
        }
    }
}